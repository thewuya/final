<!DOCTYPE html>
<html>
    <head>
        <title>结构体</title>
        <meta name="viewport" content="width=device-width, initial-scale=1"> 
        <link rel="stylesheet" href="../../css/bootstrap.css">
        <link rel="stylesheet" href="../../css/study.css">
        <link rel="stylesheet" href="../../css/prism.css">
        <link rel="stylesheet" href="../../css/back_button.css">
        <link rel="stylesheet" href="../../css/pauseMenu.css">
    </head>
    <body style="font-family: HZKPixel;">
        <!-- Pause Button -->
    <audio id="music-player" autoplay>
        <source src="../../audio/question.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <!-- Pause Menu -->
    <button id="show-pause-menu" class="btn-retro">||</button>

    <!-- Pause Menu -->
    <div id="pause-menu" class="menu" style="display: none;">
        <h2>Paused</h2>
        <ul>
            <li><button onclick="togglePauseMenu()" class="btn-retro">Resume</button></li>
            <li><a id="music_button" onclick="play_music()" class="btn-retro">音乐</a></li>
            <li><a  href="../menu_experience.html" class="btn-retro">放弃</a></li>
            <li><a  id="logoutButton" onclick="handleLogout()" class="btn-retro">登出</a></li>
            
        </ul>
    </div>
      <div class="parent">
        <div class="child">
          <div class="row">
            <div class="col-1"  >
              <button class="dropdown-button" data-menu="menu1">介绍&darr;</button>
                <div id="menu1" class="dropdown-content">
                <a class="btn-retro" href="../../templates/study/study1.html">C 教程</a>
                <a class="btn-retro" href="../../templates/study/study2.html">程序结构</a>
                <a class="btn-retro" href="../../templates/study/study3.html">基础语法</a>
                <a class="btn-retro" href="../../templates/study/study4.html">数据类型</a>
                </div>
                <button class="dropdown-button" data-menu="menu2">基础&darr;</button>
                <div id="menu2" class="dropdown-content">
                <a class="btn-retro" href="../../templates/study/study5.html">变量</a>
                <a class="btn-retro" href="../../templates/study/study6.html">常量</a>
                <a class="btn-retro" href="../../templates/study/study7.html">存储类</a>
                <a class="btn-retro" href="../../templates/study/study8.html">运算符</a>
                <a class="btn-retro" href="../../templates/study/study9.html">判断</a>
                </div>
                <button class="dropdown-button" data-menu="menu3">进阶&darr;</button>
                <div id="menu3" class="dropdown-content">
                <a class="btn-retro" href="../../templates/study/study10.html">循环</a>
                <a class="btn-retro" href="../../templates/study/study11.html">函数</a>
                <a class="btn-retro" href="../../templates/study/study12.html">作用域</a>
                <a class="btn-retro" href="../../templates/study/study13.html">数组</a>
                <a class="btn-retro" href="../../templates/study/study14.html">枚举</a>
                <a class="btn-retro" href="../../templates/study/study15.html">指针</a>
                <a class="btn-retro" href="../../templates/study/study16.html">字符串</a>
                <a class="btn-retro" href="../../templates/study/study17.html">结构体</a>
                </div>
            </div>

            <div class="col-9">
              <h5>C 结构体</h5>
              <p>C 数组允许定义可存储相同类型数据项的变量，结构是 C 编程中另一种用户自定义的可用的数据类型，它允许您存储不同类型的数据项。

                结构体中的数据成员可以是基本数据类型（如 int、float、char 等），也可以是其他结构体类型、指针类型等。</p>
                <hr>
                <h5>定义结构</h5>
                <p>结构体定义由关键字 struct 和结构体名组成，结构体名可以根据需要自行定义。

                  struct 语句定义了一个包含多个成员的新的数据类型，struct 语句的格式如下：</p>
                  <div class="container">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="code-block">                                        <pre><code class="language-clike">
                              struct tag { 
                                member-list
                                member-list 
                                member-list  
                                ...
                            } variable-list ;
                
                                </code></pre>
                            </div>
                        </div>
                    </div>
                </div>
                <p>tag 是结构体标签。

                  member-list 是标准的变量定义，比如 int i; 或者 float f;，或者其他有效的变量定义。
                  
                  variable-list 结构变量，定义在结构的末尾，最后一个分号之前，您可以指定一个或多个结构变量。下面是声明 Book 结构的方式：</p>
                  <div class="container">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="code-block">                                        <pre><code class="language-clike">
                              struct Books
                              {
                                 char  title[50];
                                 char  author[50];
                                 char  subject[100];
                                 int   book_id;
                              } book;
                
                                </code></pre>
                            </div>
                        </div>
                    </div>
                </div>
                <p>在一般情况下，tag、member-list、variable-list 这 3 部分至少要出现 2 个。以下为实例：</p>
                <div class="container">
                  <div class="row">
                      <div class="col-md-12">
                          <div class="code-block">                                        <pre><code class="language-clike">
                            //此声明声明了拥有3个成员的结构体，分别为整型的a，字符型的b和双精度的c
                            //同时又声明了结构体变量s1
                            //这个结构体并没有标明其标签
                            struct 
                            {
                                int a;
                                char b;
                                double c;
                            } s1;
                            
                            //此声明声明了拥有3个成员的结构体，分别为整型的a，字符型的b和双精度的c
                            //结构体的标签被命名为SIMPLE,没有声明变量
                            struct SIMPLE
                            {
                                int a;
                                char b;
                                double c;
                            };
                            //用SIMPLE标签的结构体，另外声明了变量t1、t2、t3
                            struct SIMPLE t1, t2[20], *t3;
                            
                            //也可以用typedef创建新类型
                            typedef struct
                            {
                                int a;
                                char b;
                                double c; 
                            } Simple2;
                            //现在可以用Simple2作为类型声明新的结构体变量
                            Simple2 u1, u2[20], *u3;
              
                              </code></pre>
                          </div>
                      </div>
                  </div>
              </div>
              <p>在上面的声明中，第一个和第二声明被编译器当作两个完全不同的类型，即使他们的成员列表是一样的，如果令 t3=&s1，则是非法的。

                结构体的成员可以包含其他结构体，也可以包含指向自己结构体类型的指针，而通常这种指针的应用是为了实现一些更高级的数据结构如链表和树等。</p>
                <div class="container">
                  <div class="row">
                      <div class="col-md-12">
                          <div class="code-block">                                        <pre><code class="language-clike">
                            //此结构体的声明包含了其他的结构体
                            struct COMPLEX
                            {
                                char string[100];
                                struct SIMPLE a;
                            };
                            
                            //此结构体的声明包含了指向自己类型的指针
                            struct NODE
                            {
                                char string[100];
                                struct NODE *next_node;
                            };
              
                              </code></pre>
                          </div>
                      </div>
                  </div>
              </div>
              <p>如果两个结构体互相包含，则需要对其中一个结构体进行不完整声明，如下所示：</p>
              <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <div class="code-block">                                        <pre><code class="language-clike">
                          struct B;    //对结构体B进行不完整声明

                          //结构体A中包含指向结构体B的指针
                          struct A
                          {
                              struct B *partner;
                              //other members;
                          };
                          
                          //结构体B中包含指向结构体A的指针，在A声明完后，B也随之进行声明
                          struct B
                          {
                              struct A *partner;
                              //other members;
                          };
            
                            </code></pre>
                        </div>
                    </div>
                </div>
            </div>
            <hr>
            <h5>结构体变量的初始化</h5>
            <p>和其它类型变量一样，对结构体变量可以在定义时指定初始值。</p>
            <div class="container">
              <div class="row">
                  <div class="col-md-12">
                      <div class="code-block">                                        <pre><code class="language-clike">
                          #include &lt;stdio.h&gt
                          

                            struct Books
                            {
                               char  title[50];
                               char  author[50];
                               char  subject[100];
                               int   book_id;
                            } book = {"C 语言", "RUNOOB", "编程语言", 123456};
                            
                            int main()
                            {
                                printf("title : %s\nauthor: %s\nsubject: %s\nbook_id: %d\n", book.title, book.author, book.subject, book.book_id);
                            }
                          </code></pre>
                      </div>
                  </div>
              </div>
          </div>
          <p>执行输出结果为：</p>
          <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="code-block">                                        <pre><code class="language-clike">
                      title : C 语言
                      author: RUNOOB
                      subject: 编程语言
                      book_id: 123456
        
                        </code></pre>
                    </div>
                </div>
            </div>
        </div>
        <hr>
        <h5>访问结构成员</h5>
        <p>为了访问结构的成员，我们使用成员访问运算符（.）。成员访问运算符是结构变量名称和我们要访问的结构成员之间的一个句号。您可以使用 struct 关键字来定义结构类型的变量。下面的实例演示了结构的用法：</p>
        <div class="container">
          <div class="row">
              <div class="col-md-12">
                  <div class="code-block">                                        <pre><code class="language-clike">
                      #include &lt;stdio.h&gt
                        #include &lt;string.h&gt
                         
                        struct Books
                        {
                           char  title[50];
                           char  author[50];
                           char  subject[100];
                           int   book_id;
                        };
                         
                        int main( )
                        {
                           struct Books Book1;        /* 声明 Book1，类型为 Books */
                           struct Books Book2;        /* 声明 Book2，类型为 Books */
                         
                           /* Book1 详述 */
                           strcpy( Book1.title, "C Programming");
                           strcpy( Book1.author, "Nuha Ali"); 
                           strcpy( Book1.subject, "C Programming Tutorial");
                           Book1.book_id = 6495407;
                        
                           /* Book2 详述 */
                           strcpy( Book2.title, "Telecom Billing");
                           strcpy( Book2.author, "Zara Ali");
                           strcpy( Book2.subject, "Telecom Billing Tutorial");
                           Book2.book_id = 6495700;
                         
                           /* 输出 Book1 信息 */
                           printf( "Book 1 title : %s\n", Book1.title);
                           printf( "Book 1 author : %s\n", Book1.author);
                           printf( "Book 1 subject : %s\n", Book1.subject);
                           printf( "Book 1 book_id : %d\n", Book1.book_id);
                        
                           /* 输出 Book2 信息 */
                           printf( "Book 2 title : %s\n", Book2.title);
                           printf( "Book 2 author : %s\n", Book2.author);
                           printf( "Book 2 subject : %s\n", Book2.subject);
                           printf( "Book 2 book_id : %d\n", Book2.book_id);
                        
                           return 0;
                        }
                      </code></pre>
                  </div>
              </div>
          </div>
      </div>
      <p>当上面的代码被编译和执行时，它会产生下列结果：</p>
      <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="code-block">                                        <pre><code class="language-clike">
                  Book 1 title : C Programming
                  Book 1 author : Nuha Ali
                  Book 1 subject : C Programming Tutorial
                  Book 1 book_id : 6495407
                  Book 2 title : Telecom Billing
                  Book 2 author : Zara Ali
                  Book 2 subject : Telecom Billing Tutorial
                  Book 2 book_id : 6495700
                  
    
                    </code></pre>
                </div>
            </div>
        </div>
    </div>
    <hr>
    <h5>结构作为函数参数</h5>
    <p>您可以把结构作为函数参数，传参方式与其他类型的变量或指针类似。您可以使用上面实例中的方式来访问结构变量：</p>
    <div class="container">
      <div class="row">
          <div class="col-md-12">
              <div class="code-block">                                        <pre><code class="language-clike">
                  #include &lt;stdio.h&gt
                    #include &lt;string.h&gt
                     
                    struct Books
                    {
                       char  title[50];
                       char  author[50];
                       char  subject[100];
                       int   book_id;
                    };
                    
                    /* 函数声明 */
                    void printBook( struct Books book );
                    int main( )
                    {
                       struct Books Book1;        /* 声明 Book1，类型为 Books */
                       struct Books Book2;        /* 声明 Book2，类型为 Books */
                     
                       /* Book1 详述 */
                       strcpy( Book1.title, "C Programming");
                       strcpy( Book1.author, "Nuha Ali"); 
                       strcpy( Book1.subject, "C Programming Tutorial");
                       Book1.book_id = 6495407;
                    
                       /* Book2 详述 */
                       strcpy( Book2.title, "Telecom Billing");
                       strcpy( Book2.author, "Zara Ali");
                       strcpy( Book2.subject, "Telecom Billing Tutorial");
                       Book2.book_id = 6495700;
                     
                       /* 输出 Book1 信息 */
                       printBook( Book1 );
                    
                       /* 输出 Book2 信息 */
                       printBook( Book2 );
                    
                       return 0;
                    }
                    void printBook( struct Books book )
                    {
                       printf( "Book title : %s\n", book.title);
                       printf( "Book author : %s\n", book.author);
                       printf( "Book subject : %s\n", book.subject);
                       printf( "Book book_id : %d\n", book.book_id);
                    }
                  </code></pre>
              </div>
          </div>
      </div>
  </div>
  <p>当上面的代码被编译和执行时，它会产生下列结果：</p>
  <div class="container">
    <div class="row">
        <div class="col-md-12">
            <div class="code-block">                                        <pre><code class="language-clike">
              Book title : C Programming
              Book author : Nuha Ali
              Book subject : C Programming Tutorial
              Book book_id : 6495407
              Book title : Telecom Billing
              Book author : Zara Ali
              Book subject : Telecom Billing Tutorial
              Book book_id : 6495700
              

                </code></pre>
            </div>
        </div>
    </div>
</div>
<hr>
<h5>指向结构的指针</h5>
<div class="container">
  <div class="row">
      <div class="col-md-12">
          <div class="code-block">                                        <pre><code class="language-clike">
              #include &lt;stdio.h&gt
              #include &lt;string.h&gt
                 
                struct Books
                {
                   char  title[50];
                   char  author[50];
                   char  subject[100];
                   int   book_id;
                };
                
                /* 函数声明 */
                void printBook( struct Books *book );
                int main( )
                {
                   struct Books Book1;        /* 声明 Book1，类型为 Books */
                   struct Books Book2;        /* 声明 Book2，类型为 Books */
                 
                   /* Book1 详述 */
                   strcpy( Book1.title, "C Programming");
                   strcpy( Book1.author, "Nuha Ali"); 
                   strcpy( Book1.subject, "C Programming Tutorial");
                   Book1.book_id = 6495407;
                
                   /* Book2 详述 */
                   strcpy( Book2.title, "Telecom Billing");
                   strcpy( Book2.author, "Zara Ali");
                   strcpy( Book2.subject, "Telecom Billing Tutorial");
                   Book2.book_id = 6495700;
                 
                   /* 通过传 Book1 的地址来输出 Book1 信息 */
                   printBook( &Book1 );
                
                   /* 通过传 Book2 的地址来输出 Book2 信息 */
                   printBook( &Book2 );
                
                   return 0;
                }
                void printBook( struct Books *book )
                {
                   printf( "Book title : %s\n", book->title);
                   printf( "Book author : %s\n", book->author);
                   printf( "Book subject : %s\n", book->subject);
                   printf( "Book book_id : %d\n", book->book_id);
                }
              </code></pre>
          </div>
      </div>
  </div>
</div>
            </div>
          </div>
        </div>
    </div>
    <script src="../../js/pauseMenu.js"></script>
    <script src="../../js/study.js" ></script>
        <script src="../../js/bootstrap.js" defer></script>
        <script src="../../js/prism.js"></script>
    </body>
</html>